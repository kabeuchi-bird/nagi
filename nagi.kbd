(defvar
    timeout 100
    macro-delay 5
)

(defcfg
    ;; æœªå®šç¾©ã‚­ãƒ¼ã‚’ç”Ÿã®ã¾ã¾é€šã™
    process-unmapped-keys yes
)

;; ã‚½ãƒ¼ã‚¹å®£è¨€ã€‚ã‚­ãƒ¼ãƒãƒƒãƒ—å¤‰æ›´å‰ã®ãƒãƒƒãƒ”ãƒ³ã‚°ã‚’ã“ã“ã§å®šç¾©ã™ã‚‹
(defsrc
    grv 1 2   3    4    5    6    7    8    9    0    -
    q    w    e    r    t    y    u    i    o    p
    a    s    d    f    g    h    j    k    l    ;
    lshift z    x    c    v    b    n    m    ,    .    / rshift
    spc
)

;; ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå®£è¨€ã€‚Shiftä»¥å¤–ã®ãƒ¢ãƒ‡ã‚£ãƒ•ã‚¡ã‚¤ã‚¢ã‚­ãƒ¼ã‚’æŠ¼ã•ãªã„ãªã‚‰è–™åˆ€å¼ã€æŠ¼ã™ãªã‚‰qwerty
(deftemplate stroke (key) (fork (chord nagi $key) $key (lctrl rctrl lmeta rmeta lalt ralt lshift)))

;; ã‚¨ã‚¤ãƒªã‚¢ã‚¹å®£è¨€ã€‚å¼ã«åˆ¥åã‚’ã¤ã‘ã‚‹
(defalias
    ngsft    (layer-while-held shifted) ;;è–™åˆ€å¼ç”¨ã®ã‚·ãƒ•ãƒˆ
    sands    (tap-hold-press $timeout 300 spc @ngsft) ;;SandSã€‚å˜æ‰“ã§ã¯ã‚¹ãƒšãƒ¼ã‚¹ã€é•·æŠ¼ã—ã§è–™åˆ€å¼ç”¨ã‚·ãƒ•ãƒˆ
    goqwr    (multi grv (layer-switch qwerty)) ;;ã‹ãª â†  è‹±æ•°ã®åˆ‡ã‚Šæ›¿ãˆ
    gonag    (multi grv (layer-switch single)) ;;ã‹ãª  â†’ è‹±æ•°ã®åˆ‡ã‚Šæ›¿ãˆ
)

;; qwertyã‚’ãã®ã¾ã¾é€šã™ãƒ¬ã‚¤ãƒ¤ãƒ¼ã€‚
;; åŠè§’ãƒ»å…¨è§’ã‚­ãƒ¼ â†’ qwertyãƒ»è–™åˆ€å¼ã¨IMEã®åŒæ™‚åˆ‡ã‚Šæ›¿ãˆ
;; hãƒ»jåŒæ™‚æŠ¼ã—   â†’ è–™åˆ€å¼ã¸åˆ‡ã‚Šæ›¿ãˆ
;; ã‚¹ãƒšãƒ¼ã‚¹       â†’ SandSï¼ˆé€šå¸¸ã®ã‚·ãƒ•ãƒˆï¼‰
(deflayer qwerty
    @gonag _ _ _ _ _ _ _ _ _ _ _
    _ _ _ _ _ _ _ _ _ _
    _ _ _ _ _ (chord qwerty h) (chord qwerty j) _ _ _
    _ _ _ _ _ _ _ _ _ _ _ _
    (tap-hold-press $timeout 300 spc lshift)
)

;; å˜æŠ¼ã—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã€‚ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’å±•é–‹ã—ã€å„ã‚­ãƒ¼ã«å¯¾å¿œã•ã›ã‚‹
(deflayer single
    @goqwr _ _ _ _ _ _ _ _ _ _ /
    (t! stroke q) (t! stroke w) (t! stroke e) (t! stroke r) (t! stroke t) (t! stroke y) (t! stroke u) (t! stroke i) (t! stroke o) (t! stroke p)
    (t! stroke a) (t! stroke s) (t! stroke d) (t! stroke f) (t! stroke g) (t! stroke h) (t! stroke j) (t! stroke k) (t! stroke l) (t! stroke ;)
    _ (t! stroke z) (t! stroke x) (t! stroke c) (t! stroke v) (t! stroke b) (t! stroke n) (t! stroke m) (t! stroke ,) (t! stroke .) (t! stroke /) @ngsft
    @sands
)

;; ã‚·ãƒ•ãƒˆãƒ¬ã‚¤ãƒ¤ãƒ¼ã€‚ãƒã‚¯ãƒ­ã¯è¤‡æ•°ã‚­ãƒ¼ã‚’é †ç•ªã«å…¥åŠ›ã™ã‚‹
(deflayer shifted
    XX S-1 S-2 S-3 S-4 S-5 S-6 S-7 S-8 S-9 S-0 S-/
    lrld   (macro m e) (macro r i) (macro n e) left   right   (macro s a) (macro y o) (macro e) (macro y u)
    (macro s e) (macro m i) (macro n i) (macro m a) (macro t i) (macro y a) (macro n o) (macro m o) (macro t u) (macro h u)
    _ (macro h o) (macro h i) (macro w o) (macro , ret) (macro n u) (macro o) (macro . ret) (macro m u) (macro w a) (macro r e) XX
    XX
)

;; ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ãƒ¬ã‚¤ãƒ¤ãƒ¼ã€‚å·¦å³Ã—ä¸­ä¸‹ã§ï¼”é¢ã«åˆ†ã‘ã¦è¨˜è¿°ã™ã‚‹
;; JKã‚·ãƒ•ãƒˆ
(deflayer jk-shifted
    _ _ _ _ _ _ _ _ _ _ _ _
    C-n / (macro d h i) C-s ğŸ”£ãƒ» _ _ _ _ _
    (macro ğŸ”£â€¦ ğŸ”£â€¦) ğŸ”£ã€ S-/ ğŸ”£ã€Œ S-8 _ _ _ _ _
    _ (macro ğŸ”£â€• ğŸ”£â€•) ğŸ”£ã€ S-1 ğŸ”£ã€ S-9 _ _ _ _ _ _
    XX
)

;; DFã‚·ãƒ•ãƒˆ
(deflayer df-shifted
    _ _ _ _ _ _ _ _ _ _ _ _
    _ _ _ _ _ home (macro end bspc) f5 del esc
    _ _ _ _ _ (macro ret end) up S-up (macro-repeat S-up 7) f7
    _ _ _ _ _ _ end down S-down (macro-repeat S-down 7) f6 _
    XX
)

;; M,ã‚·ãƒ•ãƒˆ
(deflayer m,-shifted
    _ _ _ _ _ _ _ _ _ _ _ _
    ğŸ”£ï½œ (macro spc spc spc ğŸ”£âœ• spc spc spc ğŸ”£âœ• spc spc spc ğŸ”£âœ•) (macro home right end del del left) (macro home ret spc left) ğŸ”£â—‹ _ _ _ _ _
    ğŸ”£ã€Š ğŸ”£ã€  (macro home right end del del del del left) (macro home ret spc spc spc left) (macro spc spc spc) _ _ _ _ _
    _ ğŸ”£ã€‹ ğŸ”£ã€‘ (macro ğŸ”£ã€ ret) (macro ğŸ”£ã€ ret ğŸ”£ã€Œ) (macro ğŸ”£ã€ ret spc) _ _ _ _ _ _
    XX
)
;; CVã‚·ãƒ•ãƒˆ
(deflayer cv-shifted
    _ _ _ _ _ _ _ _ _ _ _ _
    _ _ _ _ _ S-home C-x f5 C-v C-z
    _ _ _ _ _ C-c left right (macro-repeat S-left 7) (macro-repeat S-right 7)
    _ _ _ _ _ _ end S-left S-right C-S-down C-y _
    XX
)

;; è–™åˆ€å¼ã‚’ã‚³ãƒ¼ãƒ‰ã§å®šç¾©ã™ã‚‹
(defchords nagi $timeout
    ;;å˜æ‰“
    (w) (macro k i)
    (e) (macro t e)
    (r) (macro s i)
    (t) up
    (y) down
    (u) bspc
    (i) (macro r u)
    (o) (macro s u)
    (p) (macro h e)
    (a) (macro r o)
    (s) (macro k e)
    (d) (macro t o)
    (f) (macro k a)
    (g) (macro x t u)
    (h) (macro k u)
    (j) a
    (k) i
    (l) u
    (;) -
    (z) (macro h o)
    (x) (macro h i)
    (c) (macro h a)
    (v) (macro k o)
    (b) (macro s o)
    (n) (macro t a)
    (m) (macro n a)
    (,) (macro n n)
    (.) (macro r a)
    (/) (macro r e)

    ;;æ¿éŸ³
    (w j) (macro g i)
    (e j) (macro d e)
    (r j) (macro z i)
    (u f) (macro z a)
    (o f) (macro z u)
    (p f) (macro b e)
    (a j) (macro z e)
    (s j) (macro g e)
    (d j) (macro d o)
    (f j) (macro g a)
    (g j) (macro d i)
    (h f) (macro g u)
    (l f) (macro d u)
    (; f) (macro b u)
    (z j) (macro b o)
    (x j) (macro b i)
    (c j) (macro b a)
    (v j) (macro g o)
    (b j) (macro z o)
    (n f) (macro d a)

    ;;ã‚„æ‹—éŸ³
    (w h) (macro k y a)
    (e h) (macro r y a)
    (r h) (macro s y a)
    (s h) (macro m y a)
    (d h) (macro n y a)
    (g h) (macro t y a)
    (x h) (macro h y a)

    ;;ã‚†æ‹—éŸ³
    (w p) (macro k y u)
    (e p) (macro r y u)
    (r p) (macro s y u)
    (s p) (macro m y u)
    (d p) (macro n y u)
    (g p) (macro t y u)
    (x p) (macro h y u)

    ;;ã‚ˆæ‹—éŸ³
    (w i) (macro k y o)
    (e i) (macro r y o)
    (r i) (macro s y o)
    (s i) (macro m y o)
    (d i) (macro n y o)
    (g i) (macro t y o)
    (x i) (macro h y o)

    ;;ã‚„æ¿æ‹—éŸ³
    (w h j) (macro g y a)
    (r h j) (macro j a)
    (g h j) (macro d y a)
    (x h j) (macro b y a)

    ;;ã‚†æ¿æ‹—éŸ³
    (w p j) (macro g y u)
    (r p j) (macro j u)
    (g p j) (macro d y u)
    (x p j) (macro b y u)

    ;;ã‚ˆæ¿æ‹—éŸ³
    (w i j) (macro g y o)
    (r i j) (macro j o)
    (g i j) (macro d y o)
    (x i j) (macro b y o)

    ;;ãƒ‘è¡Œï¼ˆåŠæ¿éŸ³ï¼‰
    (z m) (macro p o)
    (x m) (macro p i)
    (c m) (macro p a)
    (p v) (macro p e)
    (; v) (macro p u)

    ;;ãƒ‘è¡Œæ‹—éŸ³
    (x m h) (macro p y a)
    (x m p) (macro p y u)
    (x m i) (macro p y o)

    ;;ãƒ´ã‚¡è¡Œ
    (l f j) (macro v a)
    (l f k) (macro v i)
    (l ; f) (macro v u)
    (l f o) (macro v e)
    (l f n) (macro v o)

    ;;å°æ›¸ã
    (q j) (macro x a)
    (q k) (macro x i)
    (q l) (macro x u)
    (q o) (macro x e)
    (q n) (macro x o)
    (q h) (macro x y a)
    (q p) (macro x y u)
    (q i) (macro x y o)
    (q .) (macro x w a)

    ;;å°æ›¸ãåˆæˆï¼ˆå¤–æ¥éŸ³ï¼‰
    (e m k) (macro t h i)
    (e j k) (macro d h i)
    (d m l) (macro t w u)
    (d j l) (macro d w u)
    (e m p) (macro t h u)
    (e j p) (macro d h u)
    (r m o) (macro s h e)
    (g m o) (macro c h e)
    (g j o) (macro d y e)

    (l k v) (macro w i)
    (l o v) (macro w e)
    (l n v) (macro w o)
    (k o v) (macro y e)
    (l j v) (macro t s a)
    (; j v) (macro f a)
    (; k v) (macro f i)
    (; o v) (macro f e)
    (; n v) (macro f o)
    (; p v) (macro f y u)
    (h j v) (macro q a)
    (h k v) (macro q i)
    (h o v) (macro q e)
    (h n v) (macro q o)
    (h . v) (macro q w a)
    (h k f) (macro g w a)
    (h l f) (macro g w i)
    (h o f) (macro g w e)
    (h n f) (macro g w o)
    (h . f) (macro g u x w a)

    ;;æ©Ÿèƒ½
    (v m) ret
    (f g) @goqwr

    ;;ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ã¸ã®ç§»å‹•
    (d f) (layer-while-held df-shifted)
    (j k) (layer-while-held jk-shifted)
    (c v) (layer-while-held cv-shifted)
    (m ,) (layer-while-held m,-shifted)

)

;; qwertyé…åˆ—ä¸­ã®ã‹ãª â†’ è‹±æ•°ã®åˆ‡ã‚Šæ›¿ãˆ
(defchords qwerty $timeout
    (h) h
    (j) j
    (h j) @gonag
)
